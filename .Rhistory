#Generalizing experimental results: Transportability of Causal Effects
#Real data example based on House et al., 2020
#The script prepares the data, runs the transport analysis and creates plot in Fig.6 in the manuscript
#Load some packages and set working directory to main folder
library(readr)
library(rethinking)
library(plotrix)
library(scales)
library(RColorBrewer)
setwd("~/GitHub/Cross-Cultural-Generalizability")
#Load the data from House et al., 2020
data <- read.csv("House_data/Model_6a_6b_6c_6d_data.csv")
#Generalizing description: Cross-cultural comparisons and demographic standardization
#Real data example based on House et al., 2020
#The script prepares the data, runs the multilevel regression with poststratification analysis and creates plot in Fig.4 in the manuscript
#Load some packages and set working directory to main folder
library(readr)
library(rethinking)
library(plotrix)
library(scales)
require(RColorBrewer)
setwd("~/GitHub/Cross-Cultural-Generalizability")
#Population distributions (age and gender) of Vanuatu and Berlin
Pop_Berlin <- read.csv("Example 1 Demographic Standardization/Berlin-2020.csv")
Pop_Vanuatu <- read.csv("Example 1 Demographic Standardization/Vanuatu-2019.csv")
Pop_Vanuatu <- Pop_Vanuatu[-nrow(Pop_Vanuatu),] #Delete empty cells (100+)
Pop_Berlin <- as.matrix(Pop_Berlin[,c(2,3)])
Pop_Vanuatu <- as.matrix(Pop_Vanuatu[,c(2,3)])
#Change to proportion of different cells in populations
Pop_Berlin_raw <- Pop_Berlin
Pop_Berlin <- (Pop_Berlin/sum(Pop_Berlin))*100
Pop_Vanuatu_raw <- Pop_Vanuatu
Pop_Vanuatu <- (Pop_Vanuatu/sum(Pop_Vanuatu))*100
#Load data from adults and children from House et al.,2020
data_adult <- read.csv("House_data/Model_1a_1b_1c_data.csv")
data_adult <- data_adult[,c("SUBJECT_ID","GENDER_1female","fieldid", "AGE_in_years","T1_ad_choice_1yes")]
data_adult$choice <- data_adult$T1_ad_choice_1yes
data_adult$T1_ad_choice_1yes <- NULL
data_children <- read.csv("House_data/Model_4a_4b_4c_4d_data.csv")
data_children <- data_children[,c("SUBJECT_ID","GENDER_1female","fieldid", "AGE_in_years","T1_choice_1yes")]
data_children$choice <- data_children$T1_choice_1yes
data_children$T1_choice_1yes <- NULL
