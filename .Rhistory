6
# House data for transport example
library(readr)
library(rethinking)
library(plotrix)
setwd("~/GitHub/Cross_Cultural_Generalizability")
data <- read.csv("House_data/Model_6a_6b_6c_6d_data.csv")
data$condition <- sapply(1:nrow(data), function(x) which(c(data$CONDITION_1_1yes[x],data$CONDITION_2_1yes[x],data$CONDITION_3_1yes[x]) == 1 ))
data <- data[,c("SUBJECT_ID","GENDER_1female","fieldid","AGE_in_years","condition","T1_choice_1yes")]
data$choice <- data$T1_choice_1yes
data$T1_choice_1yes <- NULL
data$age <- round(data$AGE_in_years)
data$gender <- data$GENDER_1female + 1
# Exclude data from "both ok"
data <- subset(data, data$condition != 3)
data_Phoenix <- data[which(data$fieldid == 3),]
data_Pune    <- data[which(data$fieldid == 4),]
Demo <- array(0, dim = c(6 , 12, 2))
for (j in sort(unique(data$fieldid))) {
for (i in 4:15) {
for (g in 1:2) {
Demo[j, which(4:14 == i),g] <- length(which(data$fieldid==j & data$age==i & data$gender== g))
}
}
}
Demo_Phoenix <- matrix(0, 11, 2)
Demo_Pune    <- matrix(0, 11, 2)
for (i in 4:14) {
for (g in 1:2) {
Demo_Phoenix[which(4:14 == i),g] <- length(which(data_Phoenix$age==i & data_Phoenix$gender== g))
Demo_Pune[which(4:14 == i),g]     <- length(which(data_Pune$age==i & data_Pune$gender == g))
}
}
#Prepare for stan
d_list_Phoenix <- list(N = nrow(data_Phoenix),
MA = 11,
age = data_Phoenix$age - 3,
condition = data_Phoenix$condition -1,
outcome = data_Phoenix$choice,
gender = data_Phoenix$gender,
P_empirical = t(Demo_Phoenix),
P_other = t(Demo_Pune))
d_list_Pune <- list(N = nrow(data_Pune),
MA = 11,
age = data_Pune$age - 3,
condition = data_Pune$condition -1,
outcome = data_Pune$choice,
gender = data_Pune$gender,
P_empirical = t(Demo_Pune),
P_other = t(Demo_Phoenix))
d_list <- list(N = nrow(data),
N_pop = length(unique(data$fieldid)),
MA = 12,
pop_id = data$fieldid,
age = data$age - 3,
condition = data$condition -1,
outcome = data$choice,
gender = data$gender,
P_empirical = t(Demo_Pune),
P_other = t(Demo_Phoenix))
{
5
a <- 3
5
55
